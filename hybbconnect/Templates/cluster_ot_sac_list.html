{% extends "base.html" %}
{% block title %}OT & SAC OFF Records (Cluster Manager){% endblock %}


{% block content %}
<a href="{% url 'cluster_dashboard' %}" class="btn btn-teal back-btn-fixed shadow-sm">← Back to Dashboard</a>
<div class="container mt-4">
    <h3 class="mb-4">OT & SAC OFF – My Locations</h3>

    <table class="table table-bordered table-striped">
        <thead class="table-dark">
            <tr>
                <th>Updated Date</th>
                <th>EMP ID</th>
                <th>EMP Name</th>
                <th>Location</th>
                <th>Type</th>
                <th>OT / SAC Date</th>
                <th>OT Hours</th>
                <th>Remarks</th>
            </tr>
        </thead>

        <tbody>
            {% for r in records %}
            <tr>
                <td>{{ r.updated_at|date:"d-m-Y H:i" }}</td>

                <!-- Staff fields -->
                <td>{{ r.staff.employee_id }}</td>
                <td>{{ r.staff.first_name }} {{ r.staff.last_name }}</td>
                <td>{{ r.staff.location }}</td>

                <!-- Update type -->
                <td>
                    {% if r.update_type == "TO" %}
                        Time Off (TO)
                    {% else %}
                        SAC OFF
                    {% endif %}
                </td>

                <!-- Date shown based on type -->
                <td>
                    {% if r.update_type == "TO" %}
                        {{ r.ot_date|date:"d-m-Y" }}
                    {% else %}
                        {{ r.sac_off_date|date:"d-m-Y" }}
                    {% endif %}
                </td>

                <td>{{ r.ot_hours }}</td>
                <td>{{ r.remarks }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="8" class="text-center text-muted">No Records Found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
